blueprint:
  name: On/Off Automation
  description: |
    Define an ON and an OFF situation.
    For each situation, choose:
    - IF this happens
    - THEN run these actions.
  domain: automation
  input:
    on_if:
      name: IF (ON)
      description: Trigger(s) that start the ON actions.
      default: []
      selector:
        trigger: {}
    on_then:
      name: THEN (ON)
      description: Actions to perform when ON is triggered.
      default: []
      selector:
        action: {}
    off_if:
      name: IF (OFF)
      description: Trigger(s) that start the OFF actions.
      default: []
      selector:
        trigger: {}
    off_then:
      name: THEN (OFF)
      description: Actions to perform when OFF is triggered.
      default: []
      selector:
        action: {}

mode: single

trigger:
  - !input on_if
  - !input off_if

variables:
  trigger_type: "{{ 'on' if trigger in !input on_if else 'off' }}"

action:
  - choose:
      - conditions: "{{ trigger_type == 'on' }}"
        sequence: !input on_then
      - conditions: "{{ trigger_type == 'off' }}"
        sequence: !input off_then